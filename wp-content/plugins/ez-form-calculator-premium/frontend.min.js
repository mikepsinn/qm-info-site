jQuery(document).ready(function(e){function t(t){var a=e(t),i=a.data("id");R[i]=a.data("vars"),"object"!=typeof R[i]&&(R[i]=e.parseJSON(a.data("vars"))),ezfc_subtotals[i]=[],ezfc_conditional_once[i]=[],M[i]=[],1==R[i].price_show_request&&m(i,!1),a.find(".ezfc-element-datepicker").each(function(){var t=e(this),a={};t.data("settings")&&(a=t.data("settings")),t.datepicker({dateFormat:R[i].datepicker_format,minDate:a.minDate?a.minDate:"",maxDate:a.maxDate?a.maxDate:"",numberOfMonths:a.numberOfMonths?parseInt(a.numberOfMonths):1,showAnim:a.showAnim?a.showAnim:"fadeIn",showWeek:"1"==a.showWeek&&a.showWeek,firstDay:!!a.firstDay&&a.firstDay})}),a.find(".ezfc-element-timepicker").each(function(){var t=e(this),a={};t.data("settings")&&(a=t.data("settings")),t.timepicker({minTime:a.minTime?a.minTime:null,maxTime:a.maxTime?a.maxTime:null,step:a.steps?a.steps:30,timeFormat:a.format?a.format:R[i].timepicker_format})}),a.find(".ezfc-element-daterange").each(function(){var t=e(this),a=R[i].datepicker_format;t.hasClass("ezfc-element-daterange-from")?t.datepicker({dateFormat:a,minDate:t.data("mindate"),maxDate:t.data("maxdate"),onSelect:function(i){var n=t.data("mindays")||0,r=e.datepicker.parseDate(a,i);r.setDate(r.getDate()+n),t.siblings(".ezfc-element-daterange-to").datepicker("option","minDate",r),t.trigger("change")}}):t.datepicker({dateFormat:R[i].datepicker_format,minDate:t.data("mindate"),maxDate:t.data("maxdate"),onSelect:function(i){var n=t.data("mindays")||0,r=e.datepicker.parseDate(a,i);r.setDate(r.getDate()-n),t.siblings(".ezfc-element-daterange-from").datepicker("option","maxDate",r),t.trigger("change")}})}),a.find(".ezfc-element-colorpicker").each(function(){var t=e(this),i=t.parents(".ezfc-element").find(".ezfc-element-colorpicker-input"),n=t.colorpicker({container:t}).on("changeColor.colorpicker",function(e){t.css("background-color",e.color.toHex()),i.val(e.color.toHex())});e(i).on("click focus",function(){n.colorpicker("show")}).on("change",function(){n.colorpicker("setValue",a.val())})});var n=a.find(".ezfc-step");if(n.length>0){var r=n.last();a.find(".ezfc-summary-wrapper").appendTo(r),a.find(".ezfc-submit-wrapper").appendTo(r).addClass("ezfc-submit-step"),N(r.find("input"),a)}if(e(".ezfc-custom-element[data-group]").each(function(){var t=e(this),a=t.data("group"),i=e("#ezfc_element-"+a);if("group"==i.data("element")&&i.length>0){var n=i.find("> .ezfc-group-elements");t.appendTo(n)}}),u(a),C(a),R[i].use_woocommerce){var c=".woocommerce form.cart, .woocommerce .price";e(c).hide()}var s=parseInt(R[i].step_indicator_start)+1;s>1&&a.find(".ezfc-step-indicator").hide(),"2"==ezfc_vars.debug_mode&&(a.append("<button id='ezfc-show-all-elements'>Show/hide elements</button>"),e("#ezfc-show-all-elements").click(function(){return a.hasClass("ezfc-debug-visible")?(a.removeClass("ezfc-debug-visible"),a.find(".ezfc-tmp-visible").removeClass("ezfc-tmp-visible").hide()):(a.addClass("ezfc-debug-visible"),a.find(".ezfc-hidden").addClass("ezfc-tmp-visible").show().css("display","inline-block")),!1})),R[i].use_stripe&&"undefined"!=typeof Stripe&&Stripe.setPublishableKey(ezfc_vars.stripe.publishable_key),N(":input:not(textarea):not([type=submit])",a),e(document).trigger("ezfc_form_init",i)}function a(t){var a=e(t).data("id");return w(t),R[a].price_requested=0,R[a].summary_shown=0,e(t).find(".ezfc-summary-wrapper").fadeOut(),1==R[a].price_show_request?(m(a,!1),!1):(u(t),void C(t))}function n(t,a,i,n){var r=e(t),c=r.closest(".ezfc-wrapper"),s=r.data("id");r.find(".ezfc-submit-icon").addClass("ezfc-submit-icon-show");var o=r.find(".ezfc-submit-icon"),d=r.find("input[type='submit']");if(n)return o.fadeOut(),d.prop("disabled",!1),c.find(".ezfc-payment-submit, .ezfc-payment-cancel").prop("disabled",!1),R[s].stripe_cc_info_shown=0,!1;if("stripe"==i){var f=e("#ezfc-stripe-form-"+s),l=p(s,j[s],!1,!1,!0);if(f.find(".ezfc-payment-price").text(l),R[s].stripe_cc_info_shown){var f=e("#ezfc-stripe-form-"+s);ezfc_payment_form_id=s,Stripe.card.createToken(f,D),f.find(".ezfc-payment-submit, .ezfc-payment-cancel").prop("disabled",!0)}else R[s].stripe_cc_info_shown=1,e("#ezfc-stripe-form-"+s+", #ezfc-stripe-form-modal-"+s).addClass("ezfc-payment-dialog-open");return o.fadeOut(),!1}o.fadeIn(),d.prop("disabled",!0),r.find(".ezfc-custom-hidden:not(.ezfc-element-wrapper-fileupload)").each(function(){var t=e(this).find(".ezfc-element-radio:not(:has(:radio:checked))");t.length&&e(t).first().find("input").prop("checked",!0),e(this).find("input, :selected").val("__HIDDEN__").addClass("ezfc-has-hidden-placeholder")});var u=r.serialize();u+="&url="+encodeURI(window.location.href),0==R[s].price_requested&&(u+="&price_requested=1"),0==R[s].summary_shown&&(u+="&summary=1"),a!=-1&&(u+="&step="+a),R[s].preview&&(u+="&preview="+R[s].preview),F("ezfc_before_submission",{form:r,form_vars:R[s],id:s}),e.ajax({type:"post",url:ezfc_vars.ajaxurl,data:{action:"ezfc_frontend",data:u},success:function(i){e(".ezfc-submit-icon").removeClass("ezfc-submit-icon-show"),d.removeAttr("disabled"),o.fadeOut(),T(i);try{i=e.parseJSON(i)}catch(e){i=!1,T(e)}if(!i)return r.find(".ezfc-message").text("Something went wrong. :("),"undefined"!=typeof Recaptcha&&Recaptcha.reload(),v(t,!0),!1;if(i.error){if(v(t,!0),i.id){var n=!0,f="#ezfc_element-"+i.id,l=e(f).find(".ezfc-element").first(),u=r.find(".ezfc-step-active").length>0;if(u){var p=parseInt(e(f).parents(".ezfc-step").data("step"));p!=a&&a!=-1&&(n=!1,b(t,a+1))}if(n){l.length||(l=e(f));var _=new Opentip(l,{background:ezfc_vars.opentip.background||"yellow",delay:800,hideDelay:.1,hideTriggers:["closeButton","target"],removeElementsOnHide:!0,showOn:null,target:f,tipJoint:ezfc_vars.required_text_position||"middle right"});if(_.setContent(i.error),_.show(),"undefined"!=typeof ezfc_vars.required_text_auto_hide){var h=1e3*parseFloat(ezfc_vars.required_text_auto_hide);h>0&&setTimeout(function(){_&&_.hide()},h)}R[s].disable_error_scroll||g(f)}}else{var k;k=c.find(".ezfc-payment-dialog-open").length>0?c.find(".ezfc-payment-errors"):r.parents(".ezfc-wrapper").find(".ezfc-message"),k.text(i.error).fadeIn().delay(7500).fadeOut()}return"undefined"!=typeof Recaptcha&&Recaptcha.reload(),!1}if(i.step_valid)return v(t),b(t,a+1),!1;if(i.summary)return r.find(".ezfc-summary-wrapper").fadeIn().find(".ezfc-summary").html(i.summary),R[s].summary_shown=1,v(t),!1;if("undefined"!=typeof Recaptcha&&Recaptcha.reload(),i.paypal)d.attr("disabled","disabled"),window.location.href=i.paypal;else{if(i.price_requested||0===i.price_requested)return void m(s,!0,i.price_requested);var w={form:r,form_vars:R[s],id:s,price:price,response:i};F("ezfc_submission_success",w),R[s].submission_js_func&&"function"==typeof window[R[s].submission_js_func]&&window[R[s].submission_js_func](w),c.find(".ezfc-payment-dialog, .ezfc-payment-dialog-modal").removeClass("ezfc-payment-dialog-open");var y=e(".ezfc-success-text[data-id='"+s+"']");if(y.html(i.success),1==R[s].reset_after_submission)return z(t),void y.fadeIn().delay(7500).fadeOut();if(1==R[s].hide_all_forms?e(".ezfc-form, .ezfc-required-notification").fadeOut():(r.fadeOut(),r.find(".ezfc-required-notification").fadeOut()),1==R[s].scroll_to_success_message?y.fadeIn(400,function(){g(y,-200)}):y.fadeIn(),i.woo_update_cart&&i.woo_cart_html&&ezfc_vars.woocommerce_update_cart_selector.length>0&&e(ezfc_vars.woocommerce_update_cart_selector).html(i.woo_cart_html),R[s])if("undefined"!=typeof R[s].redirect_url&&R[s].redirect_url.length>0){var x="";1==R[s].redirect_forward_values&&(x=r.serialize());var C=R[s].redirect_url.indexOf("?")==-1?"?":"&";window.location.href=R[s].redirect_url+C+x}else if("undefined"!=typeof R[s].refresh_page_after_submission&&1==R[s].refresh_page_after_submission){var N=Math.max(0,Math.abs(parseInt(R[s].redirect_timer)));setTimeout(function(){window.location.reload()},1e3*N)}}}})}function r(t,a,i,n){var r=i.data("value_external");if(r&&e(r).length>0){var c;c=e(r).is("input[type='radio']")?e(r).find(":checked").val():e(r).is("input, input[type='text'], textarea")?e(r).val():e(r).is("select")?e(r).find(":selected").text():e(r).text(),"input"==n||"numbers"==n||"subtotal"==n?i.find("input").val(c):"dropdown"==n?(i.find(":selected").removeAttr("selected"),i.find("option[value='"+c+"']").attr("selected","selected")):"radio"==n?(i.find(":checked").removeAttr("checked"),i.find("input[value='"+c+"']").attr("checked","checked")):"checkbox"==n?(i.find(":checked").removeAttr("checked"),i.find("input[value='"+c+"']").attr("checked","checked")):"textfield"==n&&i.find("textarea").val(c),M[a][r]||(M[a][r]=1,e(r).on("change keyup",function(){u(e(t))}))}}function c(t,a,i,n){var r=i.data("conditional_action"),c=i.data("conditional_operator"),s=i.data("conditional_target"),o=i.data("conditional_values"),d=i.data("conditional_target_value"),f=i.data("conditional_notoggle"),l=i.data("conditional_redirects"),u=i.data("conditional_use_factor"),p=i.data("conditional_row_operator");if(r&&0!=r){var m=r.toString().split(","),_=c.toString().split(","),h=s.toString().split(","),v=o.toString().split(","),z=d.toString().split(","),g=f.toString().split(","),w=l.toString().split(","),x=u.toString().split(","),C=p.toString().split(","),N=i.data("is_number"),F=k(i,null,!N),D=1,I=i.data("id");e.each(m,function(r,c){var s;if(s="submit_button"==h[r]?e(t).find(".ezfc-submit"):e("#ezfc_element-"+h[r]),!(s.length<1&&w.length<1)){1==x[r]&&(D=parseFloat(D),isNaN(D)||(F*=D));var o=[{operator:_[r],value:v[r]}],d=i.data("conditional_chain_length");if(d>0){var f=i.data("conditional_operator_chain_"+r),l=i.data("conditional_value_chain_"+r);if(f){var u=f.toString().split(","),p=l.toString().split(",");e.each(u,function(e,t){o.push({operator:t,value:p[e]})})}}var m=!1;e.each(o,function(e,t){var c=t.value;if(c=1==N&&"in"!=t.operator&&"not_in"!=t.operator?parseFloat(t.value):t.value,"input"==n)m=c.toLowerCase()==s.val().toLowerCase();else{var o=t.value.split(":");switch(o.length>1&&(o[0]=parseFloat(o[0]),o[1]=parseFloat(o[1])),t.operator){case"gr":m=F>c;break;case"gre":m=F>=c;break;case"less":m=F<c;break;case"lesse":m=F<=c;break;case"equals":m=F==c;break;case"between":m=!(o.length<2)&&(F>=o[0]&&F<=o[1]);break;case"not_between":m=!(o.length<2)&&(F<o[0]||F>o[1]);break;case"not":m=o.length<2?F!=c:F<o[0]&&F>o[1];break;case"hidden":m=!i.is(":visible");break;case"visible":m=i.is(":visible");break;case"mod0":m=F>0&&F%c==0;break;case"mod1":m=F>0&&F%c!=0;break;case"bit_and":m=F&c;break;case"bit_or":m=F|c;break;case"empty":"undefined"==typeof F&&(m=!0),m="number"==typeof F?isNaN(F):F.length<1;break;case"notempty":m="undefined"!=typeof F&&("number"==typeof F?!isNaN(F):F.length>0);break;case"in":if("undefined"==typeof F)m=!1;else{var d=c.split("|");m=!1;for(var f in d)if(F==d[f])return void(m=!0)}break;case"not_in":if("undefined"==typeof F)m=!1;else{var d=c.split("|");m=!0;for(var f in d)if(F==d[f])return void(m=!1)}break;case"once":m=!0,"undefined"==typeof ezfc_conditional_once[a][I]&&(ezfc_conditional_once[a][I]=[]),"undefined"==typeof ezfc_conditional_once[a][I][r]&&(ezfc_conditional_once[a][I][r]=[]),"undefined"==typeof ezfc_conditional_once[a][I][r][e]?ezfc_conditional_once[a][I][r][e]=1:m=!1;break;default:m=!1}}if("undefined"!=typeof C[r]&&1==C[r]){if(m)return!1}else if(!m)return!1});var k,S,O=g[r],q=s.data("element");if("group"==q&&s.push(e(s).find("> .ezfc-custom-element")),"set"==c&&m)"input"==q||"hidden"==q||"numbers"==q||"subtotal"==q||"set"==q?s.find("input").val(z[r]):"dropdown"==q?(s.find(":selected").removeAttr("selected"),s.find("option[data-value='"+z[r]+"']").prop("selected","selected")):"radio"==q?(s.find(":checked").removeAttr("checked"),s.find("input[data-value='"+z[r]+"']").prop("checked",!0)):"checkbox"==q?s.find("input[data-value='"+z[r]+"']").prop("checked",!0):s.text(z[r]);else if("activate"==c)m?"submit"==q?s.prop("disabled",!1):"group"==q?s.find("[data-calculate_enabled]").data("calculate_enabled",1):s.data("calculate_enabled",1):1!=O&&("submit"==q?s.prop("disabled",!0):"group"==q?s.find("[data-calculate_enabled]").data("calculate_enabled",0):s.data("calculate_enabled",0));else if("deactivate"==c)m?"submit"==q?s.prop("disabled",!0):"group"==q?s.find("[data-calculate_enabled]").data("calculate_enabled",0):s.data("calculate_enabled",0):1!=O&&("submit"==q?s.prop("disabled",!1):"group"==q?s.find("[data-calculate_enabled]").data("calculate_enabled",1):s.data("calculate_enabled",1));else if("redirect"==c&&m){var T=e(t).parents(".ezfc-wrapper").find(".ezfc-message");T.text(R[a].redirect_text).fadeIn(),e(t).fadeOut(),setTimeout(function(){window.location.href=w[r]},1e3*R[a].redirect_timer)}else if("step_goto"!=c&&"step_prev"!=c&&"step_next"!=c||!m){if("show"==c)k="removeClass",S="addClass";else{if("hide"!=c)return;k="addClass",S="removeClass"}m?(s[k]("ezfc-hidden ezfc-custom-hidden"),"show"==c?s.addClass("ezfc-fade-in"):s.is(":visible")&&s.fadeOut(500,function(){s.removeClass("ezfc-fade-in"),1==R[a].clear_selected_values_hidden&&y()})):1!=O&&(s[S]("ezfc-hidden ezfc-custom-hidden"),"show"==c?s.removeClass("ezfc-fade-in"):s.addClass("ezfc-fade-in"))}else{var A=parseInt(e(t).find(".ezfc-step-active").data("step")),M=0;switch(c){case"step_prev":if(0==A)return;M=A-1;break;case"step_next":var j=e(t).find(".ezfc-step-start").length;if(A==j-1)return;M=A+1;break;case"step_goto":var E=e(t).find(".ezfc-step-start[data-id='"+h[r]+"']");if(E.length<1)return;M=parseInt(E.data("step"))}b(e(t),M,0)}}})}}function s(t,a,i){var n=e("#ezfc-form-"+t),r=e("#ezfc_element-"+a);if(!n||!r)return void console.log("Unable to find form #"+t+" or element #"+a);var c=r.data("calculate_enabled"),s=r.data("calculate_operator")||0,o=r.data("calculate_target")||0,d=r.data("calculate_values")||0,f=r.data("calculate_use_ctvs")||0,l=r.data("add_to_price"),u=r.data("element"),p=r.closest(".ezfc-step").length>0,m=r.data("overwrite_price"),_=(I(t,a,!0),0);"subtotal"!=u&&"custom_calculation"!=u||(_=i);var h=r.find(".ezfc-element-numbers, .ezfc-element-input-hidden, .ezfc-element-subtotal, .ezfc-element-daterange-container, .ezfc-element-set, .ezfc-element-extension, :selected, :checked, .ezfc-element-custom-calculation"),v=["ceil","floor","round","abs","subtotal"];return e(h).each(function(a,n){var h={};e(this).data("settings")&&(h=e(this).data("settings"));var z=r.is(":visible");if(p&&!r.closest(".ezfc-step-active").length&&(z=!r.hasClass("ezfc-custom-hidden")),!(z||h.hasOwnProperty("calculate_when_hidden")&&0!=h.calculate_when_hidden||"hidden"==u))return void q("calculate",r,"Skipped as element is hidden and calculate_when_hidden is not enabled.");if(!(c&&0!=c||o||d||"set"==u||"subtotal"==u||"hidden"==u||"extension"==u||"custom_calculation"==u))return void q("calculate",r,"No target or values were found to calculate with. Subtotal, Hidden and Set elements are skipped.");if((!c||0==c)&&"custom_calculation"!=u)return void q("calculate",r,"Calculation is disabled.");var b=parseFloat(e(n).data("factor")),g=e(n).val(),w=k(r,null,!1),y=w/100,x=g.indexOf("%")>=0;w&&!isNaN(w)||(w=0),b&&!isNaN(b)||0===b||(b=1);var C=w;switch(u){case"numbers":case"extension":C=w;break;case"hidden":if(e(n).data("use_woocommerce_price")){var N=parseFloat(e("meta[itemprop='price']").attr("content"));isNaN(N)&&(N=0),C=N,e(n).val(N)}else C=w;break;case"dropdown":case"radio":case"checkbox":C=parseFloat(e(n).data("value")),isNaN(C)&&(C=0);break;case"subtotal":C=i;break;case"daterange":var F=[e(n).find(".ezfc-element-daterange-from").datepicker("getDate"),e(n).find(".ezfc-element-daterange-to").datepicker("getDate")];C=A(F[0],F[1])*b;break;case"custom_calculation":var D=e(r).find(".ezfc-element-custom-calculation").data("function");if(C=window[D](_),c&&(C=parseFloat(C)),e(r).find(".ezfc-element-custom-calculation-input").val(C),2==ezfc_vars.debug_mode){var O=e(r).find(".ezfc-element-custom-calculation script").text();q("custom_calculation",r,"custom_calculation:\n"+O)}}x&&(C=_*y);var T=s.toString().split(","),M=o.toString().split(","),j=d.toString().split(","),E=f.toString().split(",");T.length>0&&0!=T[0]&&e.each(T,function(a,c){if(!c)return void q("calculate",r,"#"+a+": No operator found here.");var s=[];if(e.inArray(c,v)==-1&&(s=e("#ezfc_element-"+M[a]),el_settings_target=s.find("input").data("settings"),s.hasClass("ezfc-custom-hidden")&&el_settings_target&&el_settings_target.hasOwnProperty("calculate_when_hidden")&&0==el_settings_target.calculate_when_hidden))return void q("calculate",r,"#"+a+": Skipping this element as it is conditionally hidden.");var o,d=j[a];if(s.length>0){var f=s.data("id");0==E[a]?o=k(s,null,!1):1==E[a]?o=I(t,f):2==E[a]&&(o=S(t,f))}else 0!=d&&(o=parseFloat(d));switch(o&&!isNaN(o)||(o=0),c){case"add":C+=o;break;case"subtract":C-=o;break;case"multiply":C*=o;break;case"divide":if(0==o)return void q("calculate",r,"#"+a+": Division by 0.");C/=o,"1"==e(n).data("calculate_before")&&(m=1,C=o/w);break;case"equals":C=o;break;case"power":C=Math.pow(C,o);break;case"ceil":C=Math.ceil(C);break;case"floor":C=Math.floor(C);break;case"round":C=Math.round(C);break;case"abs":C=Math.abs(C);break;case"subtotal":C=i;break;case"log":if(0==o)return;C=Math.log(o);break;case"log2":if(0==o)return;C=Math.log2(o);break;case"log10":if(0==o)return;C=Math.log10(o)}q("calculate",r,"#"+a+": operator = "+c+"\ntarget_value = "+o+"\ncalc_value = "+d+"\naddPrice = "+C)}),1==l?_+=C:2==l&&(_=C),1==m&&(_=C),q("calculate",r,"\nprice = "+_+"\naddPrice = "+C+"\nfactor = "+b)}),_}function o(e,t,a,i,n){var r=a.data("calculate_enabled"),c=(a.data("calculate_operator")||0,a.data("calculate_target")||0,a.data("calculate_values")||0,a.data("calculate_use_ctvs")||0,a.data("overwrite_price")),o=a.data("add_to_price"),d=(a.closest(".ezfc-step").length>0,s(t,a.data("id"),n));if(o>=1?1==c?n=d:1==r&&(n+=d):1==c&&(f=d),"subtotal"==i||"set"==i||"custom_calculation"==i){var f;f=1==o?1==c?n:d:2==o?d:d;var l=2,u=a.find("input").data("settings");u&&(l=u.precision);var p=x(f.toFixed(l),!0);a.find("input").val(p)}return n}function d(t,a,i,n,r){var c=i.data("discount_range_min"),s=i.data("discount_range_max"),o=i.data("discount_operator"),d=i.data("discount_values"),f=i.data("overwrite_price");if(d||0==d){var l=c.toString().split(","),u=s.toString().split(","),p=o.toString().split(","),m=d.toString().split(","),_=0,h=1;if("input"==n||"numbers"==n||"subtotal"==n||"hidden"==n||"extension"==n){var v=i.find("input");h=parseFloat(v.data("factor")),h&&!isNaN(h)||0===h||(h=1),_=x(v.val())}else if("dropdown"==n)_=parseFloat(i.find(":selected").data("value"));else if("radio"==n)_=parseFloat(i.find(":checked").data("value"));else if("checkbox"==n)_=0,i.find(":checked").each(function(t,a){_+=parseFloat(e(a).data("value"))});else if("daterange"==n){var z=[i.find(".ezfc-element-daterange-from").datepicker("getDate"),i.find(".ezfc-element-daterange-to").datepicker("getDate")];_=A(z[0],z[1])}e.each(p,function(t,a){if(!(m[t].length<1)){l[t]||0===l[t]||(l[t]=Number.NEGATIVE_INFINITY),u[t]||0===u[t]||(u[t]=Number.POSITIVE_INFINITY);var c;if(_>=parseFloat(l[t])&&_<=parseFloat(u[t])){var s,o=parseFloat(m[t]);switch(a){case"add":s=o,c=r+s,f?r=c:r+=c;break;case"subtract":s=o,c=r-s,f?r=c:r-=c;break;case"percent_add":s=_*h*(o/100),c=r+s,r=c;break;case"percent_sub":s=_*h*(o/100),c=r-s,r=c;break;case"equals":s=o,c=s,r=c}"subtotal"!=n||isNaN(c)||(c=x(c,!0),e(i).find("input").val(c)),q("discount",i,"discount = "+s+"\nprice after discount = "+r)}}})}return r}function f(t,a,i,n,r){var c=i.data("set_operator"),s=i.data("set_elements");if(s){var o,d=s.toString().split(",");e.each(d,function(t,a){var i=e("#ezfc_element-"+a);if(i){var n=k(i,null,!1);if(0==t)return void(o=n);switch(c){case"min":n<o&&(o=n);break;case"max":n>o&&(o=n);break;case"avg":case"sum":o+=n;break;case"dif":o-=n;break;case"prod":o*=n;break;case"quot":0!=n&&(o/=n)}}}),"avg"==c&&(o/=d.length),o=x(o,!0),i.find("input").val(o)}}function l(t){var a=e(t).data("id"),i=0;return ezfc_subtotals[a]=[],O(),e(t).find(".ezfc-custom-element").each(function(a,n){var s=e(t).data("id"),l=e(n),u=l.data("id"),p=l.data("element"),m={};l.find("input").data("settings")&&(m=l.find("input").data("settings")),r(t,s,l,p),c(t,s,l,p);var _=0;if("undefined"!=typeof m.calculate_when_hidden&&(_=parseInt(m.calculate_when_hidden)),!l.hasClass("ezfc-hidden")||_){f(t,s,l,p);var h=o(t,s,l,p,i);i=h,i=d(t,s,l,p,i),ezfc_subtotals[s].push({el_id:u,price:i}),c(t,s,l,p)}}),i}function u(t,a,i){var n=e(t).data("id");return i?price=i:a&&0===a||(price=l(e(t))),_(e(t)),1==R[n].price_show_request&&0==R[n].price_requested?void m(n,!1):("undefined"==typeof j[n]&&(j[n]=0),void(j[n]!=price&&(0!=R[n].counter_duration?e(t).find(".ezfc-price-value").countTo({from:j[n],to:price,speed:R[n].counter_duration,refreshInterval:R[n].counter_interval,formatter:function(e,t){return p(n,e)}}):e(t).find(".ezfc-price-value").text(p(n,price)),j[n]=price)))}function p(e,t,a,i,n){var r=E,c=a||R[e].currency;R[e].price_format&&R[e].price_format.length>0&&(r=R[e].price_format),i&&i.length>0&&(r=i),isNaN(t)&&(t=0);var s=0;return isFinite(t)&&(s=numeral(t).format(r)),n&&(0==R[e].currency_position?s=c+s:s+=c),s}function m(t,a,i){var n=e(".ezfc-form[data-id='"+t+"']");a?(j[t]=0,R[t].price_requested=1,l(n),u(n,null,i),C(n)):(R[t].price_requested=0,e(n).find(".ezfc-price-value").text(R[t].price_show_request_before),e(n).find(".ezfc-submit").val(R[t].submit_text.request))}function _(t){e(t).find("[data-element='subtotal']").each(function(a,i){var n,r,c=e(i).find(".ezfc-element-subtotal"),s=x(c.val()),o=null;c.data("settings")&&(n=c.data("settings"),o=n.price_format),r=p(e(t).data("id"),s,null,o),e(i).find(".ezfc-text").text(r)}),e(t).find("[data-element='set']").each(function(a,i){var n,r,c=e(i).find(".ezfc-element-set"),s=x(c.val()),o=null;c.data("settings")&&(n=c.data("settings"),o=n.price_format),r=p(e(t).data("id"),s,null,o),e(i).find(".ezfc-text").text(r)})}function h(){e(".ezfc-fixed-price").each(function(){var t=e(this).offset(),a=e(this).data("id"),i=e(".ezfc-form[data-id='"+a+"']"),n=i.outerHeight(),r=i.offset(),c=e(window).scrollTop(),s=parseFloat(R[a].price_position_scroll_top),o=r.top-c-s;o<0&&o>-n&&e(this).offset({top:c+s}),o>0&&t.top>r.top&&e(this).offset({top:r.top})})}function v(t,a){var i=e(t).closest(".ezfc-wrapper");e(t).find(".ezfc-custom-hidden").each(function(){e.each(e(this).find("input, :selected"),function(t,a){e(this).val(e(this).data("index")).removeAttr("disabled")})}),i.find(".ezfc-payment-submit, .ezfc-payment-cancel").prop("disabled",!1),C(t,a)}function z(i){t(i),i.find(".ezfc-custom-element").each(function(){var t=e(this).data("element"),a=e(this).find("[data-initvalue]").data("initvalue");switch(t){case"checkbox":e(this).find("input").each(function(){a=e(this).data("initvalue"),1==a?e(this).prop("checked",!0):e(this).removeAttr("checked")});break;case"dropdown":e(this).find("option").removeAttr("selected"),e(this).find("option[data-index='"+a+"']").prop("selected",!0);break;case"numbers":e(this).find("input").val(a),e(this).find(".ezfc-slider-element").slider({value:a});break;case"radio":e(this).find("input").removeAttr("checked"),e(this).find("input[data-initvalue]").prop("checked",!0);break;case"textfield":e(this).find("textarea").val(a);break;default:e(this).find("input").val(a)}}),i.find(".ezfc-selected").removeClass("ezfc-selected"),b(i,0,0),a(i)}function b(t,a,i){var r=parseInt(t.find(".ezfc-step-active").data("step")),c=t.find(".ezfc-step[data-step='"+r+"']"),s=t.data("id");if(r!=a){if(1==i&&1==R[s].verify_steps){var o=t.find(".ezfc-submit-icon");return o.fadeIn(),n(t,a-1),void e(".ezfc-has-hidden-placeholder").val("").removeClass("ezfc-has-hidden-placeholder")}var d=parseInt(R[s].step_indicator_start)-1;return c.fadeOut(200,function(){var i=t.find(".ezfc-step[data-step='"+a+"']");i.fadeIn(200).addClass("ezfc-step-active"),e(this).removeClass("ezfc-step-active"),a>=d?t.find(".ezfc-step-indicator").fadeIn():t.find(".ezfc-step-indicator").hide(),g(i)}),t.find(".ezfc-step-indicator-item").each(function(){var t=parseInt(e(this).data("step"));e(this).removeClass("ezfc-step-indicator-item-active"),t<=a&&e(this).addClass("ezfc-step-indicator-item-active")}),!1}}function g(t,a){var i=e(t).offset();if("undefined"!=typeof i&&0!=ezfc_vars.auto_scroll_steps){var n=parseFloat(a)||parseFloat(ezfc_vars.scroll_steps_offset)||50,r=i.top+n;e("html, body").animate({scrollTop:r})}}function k(t,a,i){if(t||(t=e("#ezfc_element-"+a)),!t.length)return T("Unable to find element #"+a),0;var n=(t.data("decimal_point"),t.data("element")),r=t.find("input").val(),c=x(r),s=c/100,o=r?r.indexOf("%")>=0:0;c&&!isNaN(c)||(c=0);var d=i?c:parseFloat(c);switch(n){case"subtotal":case"numbers":case"hidden":case"extension":case"set":var f=t.find("input"),l=parseFloat(f.data("factor"));l&&!isNaN(l)||0===l||(l=1),d=i?r:c*l;break;case"dropdown":case"radio":case"checkbox":t.find(":selected, :checked").each(function(){i?("object"!=typeof d&&(d=[]),d.push(e(this).data("value"))):d+=parseFloat(e(this).data("value"))});break;case"daterange":var u=[t.find(".ezfc-element-daterange-from").datepicker("getDate"),t.find(".ezfc-element-daterange-to").datepicker("getDate")],l=parseFloat(t.find(".ezfc-element-daterange-from").data("factor"));l&&!isNaN(l)||0===l||(l=1),d=i?u:A(u[0],u[1])*l;break;case"custom_calculation":t.find(".ezfc-element-custom-calculation").data("function");d=t.find(".ezfc-element-custom-calculation-input").val(),i||(d=parseFloat(d));break;case"starrating":d=parseFloat(t.find(":checked").val()),isNaN(d)&&(d=0)}return o&&(d=price*s),i?d:(isNaN(d)&&(d=0),d?parseFloat(d):0)}function w(t){var a=e(t).data("id");1==R[a].clear_selected_values_hidden&&e(t).find(".ezfc-custom-hidden").each(function(){e(this).find("input[type='text']").val(""),e(this).find(":checkbox, :radio").prop("checked",!1)})}function y(e){var t=e.data("element");"input"==t||"numbers"==t||"subtotal"==t?cond_target.find("input").val(""):"dropdown"==t?cond_target.find(":selected").removeAttr("selected"):"radio"!=t&&"checkbox"!=t||cond_target.find(":checked").removeAttr("checked")}function x(e,t,a){var i=ezfc_vars.price_format_dec_point,n=String(e);return i.length<1&&(i="."),t?","==i&&(n=n.replace(",",""),n=n.replace(".",",")):","==i&&(n=n.replace(".",""),n=n.replace(",",".")),a&&(n=parseFloat(n),isNaN(n)&&(n=0)),n}function C(t,a){var i=e(t).data("id"),n=e(t).find(".ezfc-submit"),r="default",c=R[i].submit_text.default;if(1==R[i].price_show_request){if(R[i].price_requested&&!a||(c=R[i].submit_text.request,r="request"),a)return m(i,!1),!1}else if(1==R[i].summary_enabled&&0==R[i].summary_shown)r="summary",c=R[i].submit_text.summary;else if(1==R[i].use_paypal)r="paypal",c=R[i].submit_text.paypal;else if(1==R[i].payment_force_stripe)r="stripe",c=R[i].submit_text.stripe;else if(1==R[i].use_woocommerce)r="woocommerce",c=R[i].submit_text.woocommerce;else{c=R[i].submit_text.default;var s=e(t).find(".ezfc-element-wrapper-payment");if(s.length>0){var o=e(s).find(":checked").data("value");"undefined"!=typeof R[i].submit_text[o]&&(r=o,c=R[i].submit_text[o])}}n.val(c),n.data("type",r)}function N(t,a){e(t).keypress(function(e){e.keyCode||e.which;13==e.which&&e.preventDefault()})}function F(e,t){var a=window[e];"function"==typeof a&&(t=t||{},a(t))}function D(t,a){var i=e(".ezfc-form[data-id='"+ezfc_payment_form_id+"']"),r=e(".ezfc-payment-form[data-form_id='"+ezfc_payment_form_id+"']");if(a.error)T(a.error.message),e("#ezfc-payment-message-"+ezfc_payment_form_id).text(a.error.message),r.find(".ezfc-payment-submit, .ezfc-payment-cancel").prop("disabled",!1),setTimeout(function(){e("#ezfc-payment-message-"+ezfc_payment_form_id).text("")},7500);else{var c=a.id;i.find("#ezfc-stripetoken-"+ezfc_payment_form_id).val(c),n(i,-1,"stripe-checkout")}}function I(e,t,a){for(i in ezfc_subtotals[e])if(ezfc_subtotals[e][i].el_id==t)return a?"undefined"!=typeof ezfc_subtotals[e][i-1]?ezfc_subtotals[e][i-1].price:0:ezfc_subtotals[e][i].price;return null}function S(e,t){var a=parseFloat(I(e,t,!0)),i=parseFloat(I(e,t));return i-a}function O(){e(".ezfc-debug-info").remove()}function q(t,a,i){if(2==ezfc_vars.debug_mode){var t=e(a).data("element");if("group"!=t){var n=e(a).attr("id");n&&(n=n.split("ezfc_element-")[1]);var r=e(a).data("element");e(a).append("<pre class='ezfc-debug-info ezfc-debug-type-"+t+"'>[["+r+" #"+n+"]]\n["+t+"]\n"+i+"</pre>"),console.log(i,a)}}}function T(e){0!=ezfc_vars.debug_mode&&console.log(e)}function A(e,t){return e&&t?(t-e)/1e3/60/60/24:0}if("undefined"==typeof EZFC_LOADED){EZFC_LOADED=!0,ezfc_subtotals=[],ezfc_conditional_once=[],ezfc_payment_form_id=0,ezfc_functions={calculate_element:function(e,t){return s(e,t)},calculate_price:function(t){var a=e(".ezfc-form[data-id='"+t+"']");return l(a)},get_value_from:function(e,t){return k(null,e,t)},get_calculated_value_from:function(e,t){return S(e,t)},price_format:function(e,t,a,i,n){return p(e,t,a,i,n)}};var M=[],j=[];numeral.language("ezfc",{delimiters:{decimal:ezfc_vars.price_format_dec_point,thousands:ezfc_vars.price_format_dec_thousand},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(e){var t=e%10;return 1===~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th"},currency:{symbol:"$"}}),numeral.language("ezfc");var E=ezfc_vars.price_format?ezfc_vars.price_format:"0,0[.]00";numeral.defaultFormat(E),e.datepicker.setDefaults(e.datepicker.regional[ezfc_vars.datepicker_language]),e(".ezfc-element-option-image").click(function(){if(e(this).hasClass("ezfc-element-radio-image")){var t=e(this).parents(".ezfc-element-wrapper-radio");t.find(".ezfc-selected").removeClass("ezfc-selected"),t.find(".ezfc-element-radio-input").prop("checked",!1).trigger("change"),e(this).siblings(".ezfc-element-radio-input").prop("checked",!0).trigger("change"),e(this).addClass("ezfc-selected")}else if(e(this).hasClass("ezfc-element-checkbox-image")){var a=e(this).siblings(".ezfc-element-checkbox-input");a.prop("checked")?(a.prop("checked",!1).trigger("change"),e(this).removeClass("ezfc-selected")):(a.prop("checked",!0).trigger("change"),e(this).addClass("ezfc-selected"))}});var R=[];e(".ezfc-form").each(function(){t(this),e(document).trigger("ezfc_forms_loaded")}),e(".ezfc-element-fileupload").each(function(t,a){var i=e(this).parents(".ezfc-element"),n=e(i).find(".ezfc-upload-button"),r=e(this).parents("form.ezfc-form"),c=r.find("input[name='id']").val(),s=r.find("input[name='ref_id']").val(),o={action:"ezfc_frontend_fileupload",data:"id="+c+"&ref_id="+s};e(this).fileupload({formData:o,dataType:"json",add:function(t,r){e(i).find(".ezfc-bar").css("width",0),e(i).find(".progress").addClass("active"),e(i).find(".ezfc-fileupload-message").text(""),n.click(function(){return""!=e(a).val()&&(r.submit(),e(n).attr("disabled","disabled"),t.preventDefault(),!1)})},done:function(t,a){return a.result.error?(e(n).removeAttr("disabled"),e(i).find(".ezfc-fileupload-message").text(a.result.error),e(i).find(".ezfc-bar").css("width",0),!1):(e(this).attr("multiple")&&(e(this).val(""),e(n).removeAttr("disabled")),e(i).find(".progress").removeClass("active"),void e(i).find(".ezfc-fileupload-message").text(ezfc_vars.upload_success))},progressall:function(t,a){var n=parseInt(a.loaded/a.total*100,10);e(i).find(".ezfc-bar").css("width",n+"%")},replaceFileInput:!1,url:ezfc_vars.ajaxurl})}),e(".ezfc-overview").dialog({autoOpen:!1,modal:!0}),e(".ezfc-form input, .ezfc-form select").on("change keyup",function(){var t=e(this).parents(".ezfc-form");a(t)}),e(".ezfc-element-wrapper-checkbox").change(function(){var t=e(this).data("max_selectable");if(t){var a=e(this).find(":checked").length;a>=t?e(this).find("input:not(:checked)").attr("disabled","disabled"):e(this).find("input:not(:checked)").removeAttr("disabled")}}),e(".ezfc-slider").each(function(t,a){var i=e(this),n=e(a).siblings(".ezfc-slider-element"),r=n.slider({min:i.data("min")||0,max:i.data("max")||100,step:i.data("stepsslider")||1,value:i.val()||0,slide:function(e,t){var a=x(t.value,!0);i.val(a),i.trigger("change")}});i.on("change keyup",function(){r.slider("value",i.val())}),i.hasClass("ezfc-pips")&&n.slider("pips",{rest:"label",step:i.data("stepspips")||1}),
i.draggable()}),e(".ezfc-spinner").each(function(t,a){var i=e(this);i.spinner({min:i.data("min")||0,max:i.data("max")||100,step:i.data("stepsspinner")||1,change:function(e,t){i.trigger("change")},spin:function(e,t){var a=x(t.value,!0);i.val(a),i.trigger("change")},start:function(e,t){var a=x(i.val());i.val(a)},stop:function(e,t){var a=x(i.val(),!0);i.val(a)}})}),e(".ezfc-step-button").on("click",function(){var t=e(this).parents(".ezfc-form"),a=parseInt(t.find(".ezfc-step-active").data("step")),i=a+(e(this).hasClass("ezfc-step-next")?1:-1),n=e(this).hasClass("ezfc-step-next")?1:0;return b(t,i,n),!1}),e(".ezfc-step-indicator-item-active").on("click",function(){var t=e(this).closest(".ezfc-form"),a=parseInt(e(this).data("step"));return b(t,a,0),!1}),e(".ezfc-element-wrapper-payment input").on("change",function(){var t=e(this).parents(".ezfc-form").data("id");if(1!=R[t].price_show_request&&!R[t].summary_enabled){var a="paypal"==e(this).data("value"),i=a?R[t].submit_text.paypal:R[t].submit_text.default;e(this).parents(".ezfc-form").find(".ezfc-element-submit").val(i)}}),e(window).scroll(function(){h()}),h(),e(".ezfc-form").submit(function(t){var a=e(this),i=a.data("id"),r=a.find(".ezfc-submit");return 1==R[i].hard_submit||(n(a,-1,r.data("type")),t.preventDefault(),!1)}),e(".ezfc-payment-submit").click(function(t){var a=e(this).closest(".ezfc-payment-form"),i=a.data("form_id"),r=e(".ezfc-form[data-id='"+i+"']");return n(r,-1,e(this).data("payment")),t.preventDefault(),!1}),e(".ezfc-payment-cancel").click(function(){var t=e(this).closest(".ezfc-payment-form"),a=t.data("form_id"),i=e("#ezfc-form-"+a),r=".ezfc-payment-dialog-modal[data-form_id='"+a+"']";return r+=", .ezfc-payment-form",e(r).removeClass("ezfc-payment-dialog-open"),n(i,!1,!1,!0),!1}),e(".ezfc-reset").click(function(){var t=e(this).parents(".ezfc-form");return z(t),!1}),e(".ezfc-collapse-title-wrapper").on("click",function(){var t=e(this).closest(".ezfc-element-wrapper-group").find("> .ezfc-group-elements");t.slideToggle(500);var a="fa-chevron-circle-down",i="fa-chevron-circle-right",n=e(this).find(".ezfc-collapse-icon i");n.hasClass(a)?n.removeClass(a).addClass(i):n.removeClass(i).addClass(a)}),e(".ezfc-cc-number-formatter").on("change keyup",function(){var t=e(this).val();t=t.replace(/[^\dA-Z]/g,"").replace(/(.{4})/g,"$1 ").trim(),e(this).val(t)})}}),ezfc_functions={};